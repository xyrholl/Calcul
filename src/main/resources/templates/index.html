<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layouts/layout}"
>
<th:block layout:fragment="content">
<script th:inline="javascript">
    $(document).ready(function (){



    });

    $(document).on("change", "#currencyName", function (e){
        e.stopPropagation();
        if($(this).val()){
            let obj = new Object();
            obj.benchCountry = $("#benchCountry").val();
            obj.transCountry = $(this).val();
            let result = apiCon("post", "/currencyRate", obj)
            $("#currencyRate").val(result.currencyRate);
            let text = " "+result.transCountry + "/"+ result.benchCountry;
            $(".currencyRateText").text(text);
        }

    });


</script>

<h1>환율 계산</h1>
<form role="form" action="/remittance" th:objcet="${RemittanceForm}" method="post">
    <div>
        <label th:for="benchCountry">송금국가:</label>
        <select name="benchCountry" id="benchCountry" readonly>
            <option value="USD">미국(USD)</option>
        </select>
    </div>
    <div>
        <label th:for="currencyName" >수취국가:</label>
        <select name="currencyName" id="currencyName">
            <option value="">선택</option>
            <option th:each="country: ${countries}"
                    th:value="${country.currencyName}"
                    th:text="${country.countryCurrencyName}"
            />
        </select>
    </div>
    <div>
        <label th:for="currencyRate">환율:</label>
        <input name="currencyRate" id="currencyRate" type="number" readonly>
        <span class="currencyRateText"></span>
    </div>
    <div>
        <label th:for="receptionPrice">송금액:</label>
        <input type="text" name="receptionPrice" id="receptionPrice" placeholder="송금액을 입력하세요">
    </div>
    <button type="submit" >Submit</button>
</form>

</th:block>
</html>